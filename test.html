<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Matrix Video Viewer</title>
		<style>
			html,
			body {
				margin: 0;
				height: 100%;
				background: black;
				overflow: hidden;
			}

			canvas {
				position: absolute;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				display: block;
			}

			video {
				position: absolute;
				top: 50%;
				left: 50%;
				transform: translate(-50%, -50%);
				max-width: 100%;
				max-height: 100%;
				object-fit: contain;
				pointer-events: none;
			}

			.tap-zone {
				position: absolute;
				top: 0;
				width: 50%;
				height: 100%;
				z-index: 10;
			}
			#leftZone {
				left: 0;
			}
			#rightZone {
				right: 0;
			}
		</style>
	</head>
	<body>
		<canvas id="c"></canvas>
		<video id="video" muted playsinline></video>

		<!-- Tap zones for mobile -->
		<div id="leftZone" class="tap-zone"></div>
		<div id="rightZone" class="tap-zone"></div>

		<script>
			const canvas = document.getElementById("c");
			const ctx = canvas.getContext("2d");
			const video = document.getElementById("video");

			// --- Matrix rain setup ---
			function resize() {
				canvas.width = window.innerWidth;
				canvas.height = window.innerHeight;
			}
			window.addEventListener("resize", resize);
			resize();

			const symbols =
				"アカサタナハマヤラワ0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyzΩЖΨѪѬ₪¤¥";
			const fontSize = 16;
			const columns = Math.floor(canvas.width / fontSize);
			const drops = new Array(columns).fill(0);

			function matrixFrame() {
				ctx.fillStyle = "rgba(0,0,0,0.07)";
				ctx.fillRect(0, 0, canvas.width, canvas.height);
				ctx.fillStyle = "#0F0";
				ctx.font = fontSize + "px monospace";

				for (let i = 0; i < drops.length; i++) {
					const char = symbols.charAt(
						Math.floor(Math.random() * symbols.length)
					);
					ctx.fillText(char, i * fontSize, drops[i] * fontSize);
					if (drops[i] * fontSize > canvas.height && Math.random() > 0.975)
						drops[i] = 0;
					drops[i]++;
				}

				requestAnimationFrame(matrixFrame);
			}

			matrixFrame();

			const videos = Array.from(
				{ length: 12 },
				(_, i) => `https://cdn.onslaught2342.qzz.io/assets/pptx/${i + 1}.webm`
			);
			let current = 0;

			function loadVideo(index) {
				video.src = videos[index];
				video.play().catch(() => {
					const evt = new MouseEvent("click", { bubbles: true });
					document.body.dispatchEvent(evt);
				});
			}

			loadVideo(current);
			window.addEventListener("keydown", (e) => {
				if (e.key === "ArrowRight") {
					current = (current + 1) % videos.length;
					loadVideo(current);
				}
				if (e.key === "ArrowLeft") {
					current = (current - 1 + videos.length) % videos.length;
					loadVideo(current);
				}
			});

			document.getElementById("leftZone").addEventListener("click", () => {
				current = (current - 1 + videos.length) % videos.length;
				loadVideo(current);
			});
			document.getElementById("rightZone").addEventListener("click", () => {
				current = (current + 1) % videos.length;
				loadVideo(current);
			});

			document.body.addEventListener("click", () => video.play(), {
				once: true,
			});
		</script>
	</body>
</html>
